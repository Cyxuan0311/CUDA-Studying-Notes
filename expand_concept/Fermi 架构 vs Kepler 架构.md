**Fermi 架构 vs Kepler 架构：NVIDIA GPU 的演进对比**

Fermi（2010年）和Kepler（2012年）是NVIDIA GPU架构的两代重要里程碑，分别代表了CUDA通用计算能力的飞跃和能效比的显著提升。以下是它们的核心区别和技术演进：

---

**1. 架构概览**
| 特性               | Fermi (SM 2.0)                     | Kepler (SM 3.0/3.5)               |
|------------------------|----------------------------------------|---------------------------------------|
| 发布时间           | 2010年（GTX 480/580）                 | 2012年（GTX 680/Titan）              |
| 计算能力版本       | Compute Capability 2.0/2.1            | Compute Capability 3.0/3.5           |
| 设计目标           | 提升通用计算能力                      | 优化能效比和并行吞吐量               |
| 代表显卡           | GTX 480/580, Tesla C2050              | GTX 680/Titan, Tesla K80             |

---

**2. SM（流式多处理器）对比**
**(1) Fermi SM 2.0**
• CUDA核心：32个/ SM（FP32）

• Warp调度器：2个（每周期发射1条指令）

• 寄存器文件：32 KB（每个线程最多63个寄存器）

• 共享内存：16/48 KB（可配置为L1缓存）

• 双精度性能：FP64 = 1/2 FP32（性能减半）


**(2) Kepler SM 3.0/3.5**
• CUDA核心：192个/ SM（SM 3.0）或 192个/ SM（SM 3.5）

• Warp调度器：4个（每周期发射2条指令，动态并行）

• 寄存器文件：64 KB（每个线程最多255个寄存器）

• 共享内存：16/32/48 KB（更灵活配置）

• 双精度性能：FP64 = 1/3 FP32（SM 3.5提升至1/2）


关键改进：  
Kepler的SM数量更多（如GK110芯片有15个SM），且每个SM的CUDA核心数大幅增加，提高了并行吞吐量。

---

**3. 性能与能效**
| 指标               | Fermi                            | Kepler                           |
|------------------------|---------------------------------------|--------------------------------------|
| FP32算力           | 1.5 TFLOPS（GTX 580）                | 3 TFLOPS（GTX 680）                 |
| FP64算力           | 0.5 TFLOPS（Tesla C2050）            | 1 TFLOPS（Tesla K80）               |
| 能效比             | 较低（功耗高，如GTX 480 250W）       | 显著提升（GTX 680 195W）            |
| 显存带宽           | 192 GB/s（GDDR5）                    | 192-288 GB/s（GDDR5）               |

Kepler的突破：  
引入GPU Boost技术，动态调整核心频率以优化性能/功耗平衡。

---

**4. 新特性引入**
**Fermi 的创新**
• 首次支持ECC显存（Tesla系列）

• 统一的L2缓存（768 KB）

• NVIDIA GPUDirect（支持多GPU直接通信）


**Kepler 的升级**
• 动态并行（Dynamic Parallelism）：允许GPU核函数启动其他核函数，减少CPU交互。

• Hyper-Q：多个CPU线程可同时向GPU提交任务，提高利用率。

• Grid Management Unit (GMU)：优化大规模网格调度。


---

**5. 编程模型差异**
**(1) Fermi 的限制**
• 每个线程块（Block）最多1024个线程。

• 共享内存和L1缓存共享48 KB配置。


**(2) Kepler 的改进**
• 每个Block最多支持2048个线程（需Compute Capability 3.0+）。

• 共享内存和L1缓存可独立配置（16/32/48 KB）。

• 支持CUDA 5.0+的新特性（如`__shfl`指令）。


代码示例（动态并行）：  
```c
__global__ void childKernel(int *data) {
    data[threadIdx.x] *= 2;
}

__global__ void parentKernel(int *data) {
    if (threadIdx.x == 0) {
        childKernel<<<1, 32>>>(data);  // GPU端启动子核函数
    }
}
```

---

**6. 应用场景对比**
| 场景               | Fermi 适用性                     | Kepler 适用性                    |
|------------------------|--------------------------------------|--------------------------------------|
| 科学计算           | 基础FP64支持（如HPC）                | 更高FP64性能（如K80）                |
| 深度学习           | 早期CUDA加速（如AlexNet）            | 更高效训练（支持更大Batch Size）     |
| 图形渲染           | DirectX 11/OpenGL 4.2                | DirectX 11.1/OpenGL 4.3             |
| 能效敏感场景       | 不推荐（功耗高）                     | 更适合（如笔记本GPU GTX 680M）      |

---

**7. 总结**
• Fermi：奠定了现代CUDA架构的基础，但能效比低，适合早期通用计算。

• Kepler：通过动态并行、Hyper-Q等特性显著提升并行效率，成为HPC和深度学习的首选。


升级建议：  
• 若需高双精度性能（如科学计算），选择Kepler Tesla K80。

• 若开发兼容旧代码，Fermi仍可支持，但新项目建议至少Kepler起步。